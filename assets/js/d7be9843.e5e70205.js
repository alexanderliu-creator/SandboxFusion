"use strict";(self.webpackChunksandbox_fusion=self.webpackChunksandbox_fusion||[]).push([[5395],{88119:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>a,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var s=t(74848),i=t(28453);const o={sidebar_position:3},r="Python SDK",d={id:"docs/how-to/python-sdk",title:"Python SDK",description:"Installation (requires Python >= 3.8):",source:"@site/docs/docs/how-to/python-sdk.md",sourceDirName:"docs/how-to",slug:"/docs/how-to/python-sdk",permalink:"/SandboxFusion/docs/docs/how-to/python-sdk",draft:!1,unlisted:!1,editUrl:"https://github.com/bytedance/SandboxFusion/tree/main/docs/docs/docs/how-to/python-sdk.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docSidebar",previous:{title:"VerilogEval",permalink:"/SandboxFusion/docs/docs/how-to/use-dataset/verilog-eval"},next:{title:"Add Samples",permalink:"/SandboxFusion/docs/docs/how-to/add-samples"}},c={},l=[{value:"Configuring API Endpoint",id:"configuring-api-endpoint",level:2},{value:"APIs",id:"apis",level:2},{value:"run_code",id:"run_code",level:3},{value:"run_jupyter",id:"run_jupyter",level:3},{value:"get_prompts",id:"get_prompts",level:3},{value:"get_prompt_by_id",id:"get_prompt_by_id",level:3},{value:"submit",id:"submit",level:3},{value:"submit_safe",id:"submit_safe",level:3},{value:"Asynchronous Interface",id:"asynchronous-interface",level:2},{value:"Concurrent Requests",id:"concurrent-requests",level:2},{value:"Timeout Settings",id:"timeout-settings",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"python-sdk",children:"Python SDK"})}),"\n",(0,s.jsx)(n.p,{children:"Installation (requires Python >= 3.8):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install sandbox-fusion\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuring-api-endpoint",children:"Configuring API Endpoint"}),"\n",(0,s.jsxs)(n.p,{children:["By default, the SDK uses the value in the environment variable ",(0,s.jsx)(n.code,{children:"SANDBOX_FUSION_ENDPOINT"})," as the API endpoint. If this environment variable is not set, it defaults to ",(0,s.jsx)(n.code,{children:"http://localhost:8000"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"You can set or change the API endpoint in the following ways:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Set the environment variable:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'export SANDBOX_FUSION_ENDPOINT="http://your-api-endpoint.com"\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Use the ",(0,s.jsx)(n.code,{children:"set_endpoint"})," function:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from sandbox_fusion import set_endpoint\n\nset_endpoint("http://your-api-endpoint.com")\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Specify the ",(0,s.jsx)(n.code,{children:"endpoint"})," parameter when calling individual functions:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from sandbox_fusion import get_prompt_by_id, GetPromptByIdRequest\n\nget_prompt_by_id(GetPromptByIdRequest(...), endpoint="http://your-api-endpoint.com")\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Note: If the ",(0,s.jsx)(n.code,{children:"endpoint"})," parameter is specified in a function call, it will override the globally set endpoint."]}),"\n",(0,s.jsx)(n.h2,{id:"apis",children:"APIs"}),"\n",(0,s.jsx)(n.p,{children:"All HTTP APIs have a corresponding function that accepts a data structure with the same name as the API. For specific API semantics, please refer to the HTTP API documentation."}),"\n",(0,s.jsx)(n.h3,{id:"run_code",children:"run_code"}),"\n",(0,s.jsx)(n.p,{children:"Function to run code."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import run_code, RunCodeRequest\n\n# Using default retry count (5 times)\nrun_code(RunCodeRequest(code='print(123)', language='python'))\n\n# Manually specify retry count\nrun_code(RunCodeRequest(code='print(123)', language='python'), max_attempts=10)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Request data structure: ",(0,s.jsx)(n.code,{children:"RunCodeRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Response data structure: ",(0,s.jsx)(n.code,{children:"RunCodeResponse"})]}),"\n",(0,s.jsx)(n.li,{children:"Default retry count: 5"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"run_jupyter",children:"run_jupyter"}),"\n",(0,s.jsx)(n.p,{children:"Function to run Jupyter notebook."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import run_jupyter, RunJupyterRequest\n\nrun_jupyter(RunJupyterRequest(...))\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Request data structure: ",(0,s.jsx)(n.code,{children:"RunJupyterRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Response data structure: ",(0,s.jsx)(n.code,{children:"RunJupyterResponse"})]}),"\n",(0,s.jsx)(n.li,{children:"Default retry count: 3"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"get_prompts",children:"get_prompts"}),"\n",(0,s.jsx)(n.p,{children:"Function to get the list of prompts."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import get_prompts, GetPromptsRequest\n\nget_prompts(GetPromptsRequest(...))\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Request data structure: ",(0,s.jsx)(n.code,{children:"GetPromptsRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Response data structure: ",(0,s.jsx)(n.code,{children:"List[Prompt]"})]}),"\n",(0,s.jsx)(n.li,{children:"No retry mechanism"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"get_prompt_by_id",children:"get_prompt_by_id"}),"\n",(0,s.jsx)(n.p,{children:"Function to get a specific prompt by ID."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import get_prompt_by_id, GetPromptByIdRequest\n\nget_prompt_by_id(GetPromptByIdRequest(...))\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Request data structure: ",(0,s.jsx)(n.code,{children:"GetPromptByIdRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Response data structure: ",(0,s.jsx)(n.code,{children:"Prompt"})]}),"\n",(0,s.jsx)(n.li,{children:"No retry mechanism"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"submit",children:"submit"}),"\n",(0,s.jsx)(n.p,{children:"Function to submit an evaluation request."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import submit, SubmitRequest\n\nsubmit(SubmitRequest(...))\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Request data structure: ",(0,s.jsx)(n.code,{children:"SubmitRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Response data structure: ",(0,s.jsx)(n.code,{children:"EvalResult"})]}),"\n",(0,s.jsx)(n.li,{children:"Default retry count: 5"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"submit_safe",children:"submit_safe"}),"\n",(0,s.jsx)(n.p,{children:"Function to safely submit an evaluation request. If the request fails, it will return a rejected result instead of throwing an exception."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import submit_safe, SubmitRequest\n\nsubmit_safe(SubmitRequest(...))\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Request data structure: ",(0,s.jsx)(n.code,{children:"SubmitRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Response data structure: ",(0,s.jsx)(n.code,{children:"EvalResult"})]}),"\n",(0,s.jsx)(n.li,{children:"Default retry count: 5"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"asynchronous-interface",children:"Asynchronous Interface"}),"\n",(0,s.jsx)(n.p,{children:"All existing interfaces have asynchronous versions implemented, which can be imported by adding _async to the corresponding function name."}),"\n",(0,s.jsx)(n.h2,{id:"concurrent-requests",children:"Concurrent Requests"}),"\n",(0,s.jsx)(n.p,{children:"The sandbox provides tools for concurrent requests, allowing convenient batch execution of certain function operations."}),"\n",(0,s.jsx)(n.p,{children:"Here's an example of running code concurrently:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import set_sandbox_endpoint, run_concurrent, run_code, RunCodeRequest\nset_sandbox_endpoint('https://faas-code-sandbox.bytedance.net/')\n\ncodes = [f'print({i})' for i in range(123, 456)]\nresults = run_concurrent(run_code, args=[[RunCodeRequest(code=c, language='python')] for c in codes])\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can replace with other functions by referring to the interfaces above."}),"\n",(0,s.jsx)(n.h2,{id:"timeout-settings",children:"Timeout Settings"}),"\n",(0,s.jsx)(n.p,{children:"The package has added timeout configuration capabilities for time-consuming functions, available for both synchronous and asynchronous versions. These functions include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"submit"}),"\n",(0,s.jsx)(n.li,{children:"run_code"}),"\n",(0,s.jsx)(n.li,{children:"run_jupyter"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The parameter is ",(0,s.jsx)(n.code,{children:"client_timeout"}),". Here's an example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from sandbox_fusion import run_code, RunCodeRequest\n\nprint(\n    run_code(RunCodeRequest(code='import time; time.sleep(4); print(123)', language='python'),\n             max_attempts=1,\n             client_timeout=3))\n"})})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);