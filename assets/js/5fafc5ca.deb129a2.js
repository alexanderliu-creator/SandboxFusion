"use strict";(self.webpackChunksandbox_fusion=self.webpackChunksandbox_fusion||[]).push([[3075],{45919:(e,i,o)=>{o.r(i),o.d(i,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var n=o(74848),s=o(28453);const t={},r="General Specifications",c={id:"docs/reference/execution-detail/common",title:"General Specifications",description:"Unless otherwise specified, all sandbox code is executed in a temporary directory created under /tmp. This directory will be destroyed after code execution.",source:"@site/docs/docs/reference/execution-detail/common.md",sourceDirName:"docs/reference/execution-detail",slug:"/docs/reference/execution-detail/common",permalink:"/SandboxFusion/docs/docs/reference/execution-detail/common",draft:!1,unlisted:!1,editUrl:"https://github.com/bytedance/SandboxFusion/tree/main/docs/docs/docs/reference/execution-detail/common.md",tags:[],version:"current",frontMatter:{},sidebar:"docSidebar",previous:{title:"Execution Detail",permalink:"/SandboxFusion/docs/category/execution-detail"},next:{title:"C++",permalink:"/SandboxFusion/docs/docs/reference/execution-detail/cpp"}},d={},l=[{value:"Isolation Modes",id:"isolation-modes",level:2},{value:"No Isolation",id:"no-isolation",level:3},{value:"Light Isolation",id:"light-isolation",level:3}];function a(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"general-specifications",children:"General Specifications"})}),"\n",(0,n.jsxs)(i.p,{children:["Unless otherwise specified, all sandbox code is executed in a temporary directory created under ",(0,n.jsx)(i.code,{children:"/tmp"}),". This directory will be destroyed after code execution."]}),"\n",(0,n.jsxs)(i.p,{children:["Unless otherwise specified, the code parameter passed to the sandbox will be written to a temporary file in the temporary directory. For Python as an example, the launch command would look like ",(0,n.jsx)(i.code,{children:"python /tmp/tmpha4dcl5b/tmpx8k1pnfh.py"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:["Files passed through ",(0,n.jsx)(i.code,{children:"files"})," support both absolute and relative paths. Relative paths are based on the aforementioned temporary directory, such as ",(0,n.jsx)(i.code,{children:"/tmp/tmpha4dcl5b"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:["The file path rules for the ",(0,n.jsx)(i.code,{children:"fetch_files"})," parameter are the same as ",(0,n.jsx)(i.code,{children:"files"}),". For specific usage, refer to the ",(0,n.jsx)(i.a,{href:"/docs/api/run-code-run-code-post",children:"API Documentation"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:["When executing code, the sandbox provides two different isolation modes. Configuration methods can be found ",(0,n.jsx)(i.a,{href:"/docs/docs/reference/config",children:"here"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"A general code execution flow:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Create temporary directory"}),"\n",(0,n.jsxs)(i.li,{children:["Write files passed through ",(0,n.jsx)(i.code,{children:"files"})]}),"\n",(0,n.jsxs)(i.li,{children:["Write code passed through ",(0,n.jsx)(i.code,{children:"code"})," to temporary file"]}),"\n",(0,n.jsx)(i.li,{children:"Set up environment according to isolation mode"}),"\n",(0,n.jsx)(i.li,{children:"Execute compilation commands (if needed)"}),"\n",(0,n.jsx)(i.li,{children:"Execute run commands"}),"\n",(0,n.jsxs)(i.li,{children:["Retrieve files specified by ",(0,n.jsx)(i.code,{children:"fetch_files"})]}),"\n",(0,n.jsx)(i.li,{children:"Clean up environment"}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"isolation-modes",children:"Isolation Modes"}),"\n",(0,n.jsx)(i.h3,{id:"no-isolation",children:"No Isolation"}),"\n",(0,n.jsx)(i.p,{children:"This mode does not impose any restrictions on the executing code process, though for some languages the process uid will be set to non-root. This mode provides the best performance."}),"\n",(0,n.jsx)(i.h3,{id:"light-isolation",children:"Light Isolation"}),"\n",(0,n.jsx)(i.p,{children:"Light isolation has relatively weaker performance and requires privileged containers to use. It is suitable for situations where the executed code is potentially dangerous or needs to modify system files. The isolation includes:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"cgroups resource limits (CPU, memory)"}),"\n",(0,n.jsx)(i.li,{children:"Network namespace isolation"}),"\n",(0,n.jsx)(i.li,{children:"overlayfs + chroot filesystem isolation"}),"\n",(0,n.jsx)(i.li,{children:"PID namespace isolation"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);